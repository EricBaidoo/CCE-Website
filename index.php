<?php
// Set meta data for this page
$meta = [
    'title' => 'Cross-Cutting Excellence - Transforming Secular Institutions with Christian Professional Excellence',
    'description' => 'CCE mobilizes Christian professionals to transform secular institutions through faith-driven leadership, training, and the application of godly wisdom in professional spaces.',
    'image' => 'assets/image/hero/001-w800.jpg',
    'url' => 'https://crosscuttingexcellence.org',
    'type' => 'website',
    'json_ld' => json_encode([
        "@context" => "https://schema.org",
        "@type" => "Organization",
        "name" => "Cross-Cutting Excellence",
        "description" => "Mobilizing Christian professionals to transform secular institutions through faith-driven excellence",
        "url" => "https://crosscuttingexcellence.org",
        "logo" => "assets/image/cce-logo.png",
        "sameAs" => [
            "https://twitter.com/cce_org",
            "https://linkedin.com/company/cross-cutting-excellence"
        ]
    ])
];
?>

<!-- HEADER -->
<?php include 'header.php'; ?>

<main id="main-content" role="main">
    <!-- HERO SECTION -->
    <section class="hero-section">
        <!-- Hero Image Slider -->
        <div class="hero-slider-container">
            <div class="hero-slide active">
                <img src="assets/image/hero/001-w2000.jpg" alt="Cross-Cutting Excellence" loading="eager">
                <div class="hero-overlay"></div>
            </div>
            <div class="hero-slide">
                <img src="assets/image/hero/002-w2000.jpg" alt="Faculty Endeavours" loading="lazy">
                <div class="hero-overlay"></div>
            </div>
            <div class="hero-slide">
                <img src="assets/image/hero/003-w2000.jpg" alt="Global Impact" loading="lazy">
                <div class="hero-overlay"></div>
            </div>
        </div>
        
        <!-- Hero Content -->
        <div class="hero-content">
            <div class="hero-container">
                <!-- Content Slide 1 -->
                <div class="hero-content-slide active" data-slide="0">
                    <p class="hero-kicker">FOCUS • DILIGENCE • CONSISTENCY</p>
                    <h1 class="hero-title">Cross-Cutting Excellence</h1>
                    <p class="hero-subtitle">Building the capacity of Christian professionals to transform their spheres of endeavour with the manifold wisdom of God</p>
                    <!-- <div class="hero-actions">
                        <a href="get-involved.php" class="hero-btn hero-btn-primary">Get Involved</a>
                        <a href="about.php" class="hero-btn hero-btn-secondary">Learn More</a>
                    </div> -->
                </div>
                
                <!-- Content Slide 2 -->
                <div class="hero-content-slide" data-slide="1">
                    <p class="hero-kicker">BUILDING CAPACITY</p>
                    <h1 class="hero-title">Faculty Endeavours</h1>
                    <p class="hero-subtitle">Empowering professionals across eight strategic faculties to excel in their diverse spheres of influence</p>
                    <!-- <div class="hero-actions">
                        <a href="faculty.php" class="hero-btn hero-btn-primary">Explore Faculties</a>
                        <a href="about.php" class="hero-btn hero-btn-secondary">Learn More</a>
                    </div> -->
                </div>
                
                <!-- Content Slide 3 -->
                <div class="hero-content-slide" data-slide="2">
                    <p class="hero-kicker">TRANSFORMING NATIONS</p>
                    <h1 class="hero-title">Global Impact</h1>
                    <p class="hero-subtitle">Christians establishing the glory of the Lord Jesus Christ across the world through their secular professions</p>
                    <!-- <div class="hero-actions">
                        <a href="get-involved.php" class="hero-btn hero-btn-primary">Join Movement</a>
                        <a href="events.php" class="hero-btn hero-btn-secondary">View Events</a>
                    </div> -->
                </div>
            </div>
        </div>
        
        <!-- Hero Controls -->
        <div class="hero-controls">
            <button class="hero-control active" data-slide="0" aria-label="Slide 1"></button>
            <button class="hero-control" data-slide="1" aria-label="Slide 2"></button>
            <button class="hero-control" data-slide="2" aria-label="Slide 3"></button>
        </div>

    </section>


      
      <!-- WHO WE ARE SECTION (Modernized) -->
      <section class="who-we-are-section">
        <div class="who-we-are-container">
        <div class="who-we-are-header">
          <h2 class="who-we-are-title">Excellence is to Excel</h2>
          <p class="who-we-are-subtitle">To have excess competence, be abundantly fruitful, to have more than may be immediately required... relevant more</p>
        </div>
        <div class="who-we-are-content">
          <div class="who-we-are-text">
          <h4>What is Excellence?</h4>
          <p>Excellence is to excel, to have excess competence, be abundantly fruitful, to have more than may be immediately required...relevant more. Excellence is to possess eternal life.</p>
          
          <h4>Our Vision</h4>
          <p>We see Christians establishing the glory of the Lord Jesus Christ across the world through their secular professions.</p>
          
          <h4>Our Mission</h4>
          <p>Building the capacity of Christian professionals to transform their various spheres of endeavour with the manifold wisdom of God.</p>
          
          <h4>Seculo-Spiritual Aptitude (SSA)</h4>
          <p>God's word, inspired by the Spirit of Christ Jesus, is the guidance by which the skill of godliness is manifested in secular endeavours. We call this Seculo-Spiritual Aptitude (SSA).</p>
          </div>
            <div class="who-we-are-image">
            <img src="assets/image/companies-and-people/Eric-Baidoo.png" alt="CCE Team" onerror="this.src='assets/image/hero/001-w800.jpg';">
            <div class="image-caption">
              <h4>Our  Team</h4>
              <p>Dedicated professionals transforming institutions through faith-driven excellence</p>
            </div>
            </div>
        </div>

        <!-- From The General Coordinator -->
        <div class="coordinator-message">
          <h3 class="message-title">From The General Coordinator</h3>
          <div class="message-content">
          <p>CCE is on the move-empowered by the anointing of the Holy Ghost to manifest high-end Seculo-Spiritual Aptitude (SSA).</p>
          <p>At CCE we train and equip God’s Children in the areas of Governance and Development, Education and Training, Science and Technology, philosophy and the Arts, Finance and Business, Relationships and Family, Missions and Apologetics, Communication and Media.</p>
          <p>We are transforming our secular spaces and spheres of influence to the glory of our God, in Christ Jesus.</p>
          <p>This anointing living in us makes us meek, hard working, patient, wise, bold, highly intelligent, efficient and driven by conviction. CCE provides what you need to make your life have eternal relevance: we focus on issues of eternal value. We are on the ground, engaged in local government and community development, national policy and programme implementation. We train and equip volunteers and facilitators who drive change at national and internal levels, building bottom-up experience and top-down execution in a way that integrate functional systems into real life outcomes-with eternal value! We work in the arts and philosophy, guiding film-makers, theatre performers and creatives across the range to engineer the culture of godliness that provides oxygen for prosperity in communities, nations and generations.</p>
          <p>CCE People are business owners and consultants spreading out across everywhere, reaching out to all the continents and creating the stable network yielding the critical mass if Christian Professional required to transform our world until the kingdoms of this world become the kingdoms of our God and of his Christ. We welcome you with open arms to come labour with and for the Lord Jesus. You will be trained and equipped to make our nations godly and prosperous for Jesus!</p>
          </div>
        </div>

        </div>
      </section>

 

    <!-- FACULTY ENDEAVOURS SECTION -->
    <section id="faculty-endeavours" class="faculty-endeavours-section" aria-labelledby="faculty-heading">
      <div class="faculty-endeavours-container">
        <header class="faculty-endeavours-header">
          <h2 id="faculty-heading" class="faculty-endeavours-title">Faculty Endeavours (FEs)</h2>
          <p class="faculty-endeavours-subtitle">CCE engages professionals across eight strategic faculties to build capacity and transform the secular space.</p>
        </header>
        <div class="faculty-endeavours-grid" role="group" aria-label="CCE Faculty Endeavours">
          <article class="faculty-endeavours-card" id="fe-gad">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-gad.svg" alt="Governance and Development icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Governance & Development (GAD)</h3>
              <p>Strengthening governance, public policy and institutional capacity for sustainable development and ethical leadership.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#gad" class="faculty-endeavours-link" aria-label="Explore Governance and Development faculty">Explore GAD</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-eat">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-eat.svg" alt="Education and Training icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Education & Training (EAT)</h3>
              <p>Empowering educators and trainers to formulate educational systems that drive industry and promote the glory of God.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#eat" class="faculty-endeavours-link" aria-label="Explore Education and Training faculty">Explore EAT</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-sat">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-sat.svg" alt="Science and Technology icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Science & Technology (SAT)</h3>
              <p>Promoting ethical innovation, research excellence and technology adoption that serve humanity and honour God.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#sat" class="faculty-endeavours-link" aria-label="Explore Science and Technology faculty">Explore SAT</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-paa">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-paa.svg" alt="Philosophy and Arts icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Philosophy & the Arts (PAA)</h3>
              <p>Integrating faith, culture and the arts to shape worldviews and communicate timeless truths with creativity.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#paa" class="faculty-endeavours-link" aria-label="Explore Philosophy and Arts faculty">Explore PAA</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-fab">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-fab.svg" alt="Finance and Business icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Finance & Business (FAB)</h3>
              <p>Championing integrity, stewardship and excellence in business practice and financial management.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#fab" class="faculty-endeavours-link" aria-label="Explore Finance and Business faculty">Explore FAB</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-raf">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-raf.svg" alt="Relationship and Family icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Relationship & Family (RAF)</h3>
              <p>Supporting healthy relationships, family resilience and community formation rooted in godly principles.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#raf" class="faculty-endeavours-link" aria-label="Explore Relationship and Family faculty">Explore RAF</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-maa">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-maa.svg" alt="Missions and Apologetics icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Missions & Apologetics (MAA)</h3>
              <p>Preparing professionals to engage culture with the gospel, defend the faith thoughtfully and serve missionally.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty-maa.php" class="faculty-endeavours-link" aria-label="Explore Missions and Apologetics faculty">Explore MAA</a></div>
          </article>

          <article class="faculty-endeavours-card" id="fe-cam">
            <div class="faculty-endeavours-icon"><img src="assets/icons/fe-cam.svg" alt="Communication and Media icon" loading="lazy"></div>
            <div class="faculty-endeavours-body">
              <h3>Communication & Media (CAM)</h3>
              <p>Equipping communicators to shape narratives, produce high-quality content and influence public discourse with truth.</p>
            </div>
            <div class="faculty-endeavours-actions"><a href="faculty.php#cam" class="faculty-endeavours-link" aria-label="Explore Communication and Media faculty">Explore CAM</a></div>
          </article>
        </div>
      </div>
    </section>
    
    <!-- CCE PEOPLE SECTION -->
    <section id="cce-people" class="cce-people-section" aria-labelledby="people-heading">
      <div class="people-section-container">
        <div class="people-section-header">
          <h2 id="people-heading" class="people-section-title">CCE People</h2>
          <p class="people-section-subtitle">Meet practitioners, mentors and volunteers who drive our mission of excellence</p>
        </div>
        
        <div class="people-carousel-container">
          <?php
          try {
            $people = include __DIR__ . '/data/people.php';
            if (empty($people) || !is_array($people)) {
              throw new Exception('People data not available');
            }
          ?>
            <div class="carousel-wrapper">
              <div class="people-carousel" id="cce-people-carousel">
                <?php 
                foreach ($people as $person): 
                  $avatar = 'assets/image/avatars/' . $person['id'] . '-w400.jpg';
                  if (!file_exists(__DIR__ . '/../' . $avatar)) { $avatar = $person['photo']; }
                ?>
                <div class="people-card">
                  <div class="people-card-image">
                    <img src="<?= htmlspecialchars($avatar) ?>" alt="<?= htmlspecialchars($person['name']) ?>" loading="lazy" decoding="async">
                  </div>
                  <div class="people-card-content">
                    <h3 class="people-card-name"><?= htmlspecialchars($person['name']) ?></h3>
                    <p class="people-card-role"><?= htmlspecialchars($person['role']) ?></p>
                    <p class="people-card-bio"><?= htmlspecialchars($person['bio_short']) ?></p>
                    <div class="people-card-actions">
                      <a href="person.php?id=<?= urlencode($person['id']) ?>" class="people-card-link">View Profile</a>
                      <?php if (!empty($person['email'])): ?>
                        <a href="mailto:<?= htmlspecialchars($person['email']) ?>" class="people-card-social" title="Email" aria-label="Email <?= htmlspecialchars($person['name']) ?>">
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                        </a>
                      <?php endif; ?>
                      <?php if (!empty($person['linkedin'])): ?>
                        <a href="<?= htmlspecialchars($person['linkedin']) ?>" target="_blank" rel="noopener" class="people-card-social" title="LinkedIn" aria-label="LinkedIn profile">
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg>
                        </a>
                      <?php endif; ?>
                    </div>
                  </div>
                </div>
                <?php endforeach; ?>
              </div>
              
              <div class="carousel-controls">
                <button class="carousel-control-btn prev" data-carousel="cce-people-carousel" aria-label="Previous person">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 19l-7-7 7-7"/></svg>
                </button>
                <button class="carousel-control-btn next" data-carousel="cce-people-carousel" aria-label="Next person">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5l7 7-7 7"/></svg>
                </button>
              </div>
            </div>
          <?php 
          } catch (Exception $e) {
            echo '<div class="error-message" role="alert" style="text-align: center; padding: 3rem;">';
            echo '<p>Unable to load people data. Please try again later.</p>';
            echo '</div>';
          }
          ?>
        </div>
      </div>
    </section>
      <!-- CCE COMPANIES SECTION -->
    <section id="cce-companies" class="companies-section" aria-labelledby="companies-heading">
      <div class="companies-section-container">
        <header class="companies-section-header">
          <h2 id="companies-heading" class="companies-section-title">CCE Companies</h2>
          <p class="companies-section-subtitle">Mission-driven enterprises partnering with CCE to transform their spheres of influence</p>
        </header>
        
        <div class="companies-carousel-container">
          <?php
          try {
            $companies = include __DIR__ . '/data/companies.php';
            if (empty($companies) || !is_array($companies)) {
              throw new Exception('Companies data not available');
            }
          ?>
            <div class="companies-carousel-wrapper">
              <div class="companies-carousel" id="companies-carousel">
                <?php 
                // Display companies twice for infinite scroll effect
                for ($repeat = 0; $repeat < 2; $repeat++):
                  foreach ($companies as $company): 
                ?>
                <a href="company.php?id=<?= urlencode($company['id']) ?>" class="company-carousel-card" title="View <?= htmlspecialchars($company['name']) ?> profile">
                  <div class="company-carousel-logo">
                    <img src="<?= htmlspecialchars($company['logo']) ?>" alt="<?= htmlspecialchars($company['name']) ?>" loading="lazy" decoding="async">
                  </div>
                  <h3 class="company-carousel-name"><?= htmlspecialchars($company['name']) ?></h3>
                </a>
                <?php 
                  endforeach;
                endfor;
                ?>
              </div>
            </div>
          <?php 
          } catch (Exception $e) {
            echo '<div class="error-message" role="alert" style="text-align: center; padding: 3rem;">';
            echo '<p>Unable to load companies data. Please try again later.</p>';
            echo '</div>';
          }
          ?>
        </div>
      </div>
    </section>
    
    <!-- CONFERENCES & EVENTS SECTION -->
    <section id="conferences-events" class="home-events-section" aria-labelledby="events-heading">
      <div class="container">
        <header class="section-header-modern">
          <div class="header-content-wrapper">
            <span class="section-label-badge">Connect & Learn</span>
            <h2 id="events-heading" class="section-title-modern">Conferences & Events</h2>
            <p class="section-description">Join professionals from across industries at our transformative conferences, workshops, and networking events designed to equip you with godly wisdom and professional excellence</p>
          </div>
          <a href="events.php" class="view-all-btn">
            View All Events
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </header>
        <?php
        try {
          $events = include __DIR__ . '/data/events.php';
          if (empty($events) || !is_array($events)) {
            throw new Exception('Events data not available');
          }
          
          // Sort: upcoming first, then by start date
          usort($events, function($a, $b) {
            $tz = new DateTimeZone('Africa/Accra');
            $today = new DateTimeImmutable('now', $tz);
            
            $aEnd = null;
            $bEnd = null;
            
            if (!empty($a['end_datetime'])) {
              $aEnd = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $a['end_datetime'], $tz);
            } elseif (!empty($a['end_date'])) {
              $aEnd = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $a['end_date'] . ' 23:59:59', $tz);
            }
            
            if (!empty($b['end_datetime'])) {
              $bEnd = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $b['end_datetime'], $tz);
            } elseif (!empty($b['end_date'])) {
              $bEnd = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $b['end_date'] . ' 23:59:59', $tz);
            }
            
            $aIsPast = $aEnd ? ($aEnd < $today) : false;
            $bIsPast = $bEnd ? ($bEnd < $today) : false;
            
            // Upcoming events first
            if ($aIsPast !== $bIsPast) {
              return $aIsPast ? 1 : -1;
            }
            
            // Then by start date
            $aStart = $a['start_datetime'] ?? ($a['start_date'] ?? '');
            $bStart = $b['start_datetime'] ?? ($b['start_date'] ?? '');
            return strcmp($aStart, $bStart);
          });
          
          // Pagination
          $perPage = 6;
          $page = isset($_GET['events_page']) ? max(1, intval($_GET['events_page'])) : 1;
          $totalEvents = count($events);
          $totalPages = ceil($totalEvents / $perPage);
          $page = min($page, max(1, $totalPages));
          $offset = ($page - 1) * $perPage;
          $paginatedEvents = array_slice($events, $offset, $perPage);
        ?>
        <div class="home-events-grid" role="group" aria-label="Upcoming conferences and events">
          <?php foreach ($paginatedEvents as $ev): ?>
            <?php
            // Check if past event
            $tz = isset($ev['timezone']) ? new DateTimeZone($ev['timezone']) : new DateTimeZone('Africa/Accra');
            $today = new DateTimeImmutable('now', $tz);
            $end = null;
            if (!empty($ev['end_datetime'])) {
              $end = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $ev['end_datetime'], $tz);
            } elseif (!empty($ev['end_date'])) {
              $end = DateTimeImmutable::createFromFormat('Y-m-d H:i:s', $ev['end_date'] . ' 23:59:59', $tz);
            }
            $isPastEvent = $end ? ($end < $today) : false;
            ?>
            <article class="event-compact-card<?= $isPastEvent ? ' past-event' : '' ?>">
              <div class="event-compact-image">
                <img src="<?= htmlspecialchars($ev['image']) ?>" alt="<?= htmlspecialchars($ev['title']) ?>" loading="lazy">
                <div class="event-image-overlay"></div>
                <?php if ($isPastEvent): ?>
                <span class="event-compact-badge past">Past Event</span>
                <?php elseif (!empty($ev['is_featured'])): ?>
                <span class="event-compact-badge featured">
                  <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                  Featured
                </span>
                <?php else: ?>
                <span class="event-compact-badge upcoming">Upcoming</span>
                <?php endif; ?>
              </div>
              <div class="event-compact-body">
                <div class="event-compact-meta">
                  <span class="compact-date">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <?= htmlspecialchars($ev['date']) ?>
                  </span>
                  <span class="compact-location">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <?= htmlspecialchars($ev['location']) ?>
                  </span>
                </div>
                <h3 class="event-compact-title">
                  <a href="event.php?id=<?= urlencode($ev['id']) ?>">
                    <?= htmlspecialchars($ev['title']) ?>
                  </a>
                </h3>
                <p class="event-compact-excerpt"><?= htmlspecialchars(mb_substr($ev['excerpt'], 0, 90)) ?><?= mb_strlen($ev['excerpt']) > 90 ? '...' : '' ?></p>
                <div class="event-compact-actions">
                  <a href="event.php?id=<?= urlencode($ev['id']) ?>" class="btn-compact-learn">
                    Learn More
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                      <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                  </a>
                  <?php if (!empty($ev['registration_url']) && !$isPastEvent): ?>
                  <a href="<?= htmlspecialchars($ev['registration_url']) ?>" class="btn-compact-register" target="_blank" rel="noopener">
                    Register
                  </a>
                  <?php endif; ?>
                </div>
              </div>
            </article>
          <?php endforeach; ?>
        </div>

        <?php if ($totalPages > 1): ?>
        <div class="home-events-pagination">
          <?php if ($page > 1): ?>
            <a href="?events_page=<?= $page - 1 ?>#conferences-events" class="pagination-arrow prev">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              Previous
            </a>
          <?php endif; ?>

          <div class="pagination-page-numbers">
            <?php
            $startPage = max(1, $page - 2);
            $endPage = min($totalPages, $page + 2);
            
            if ($startPage > 1): ?>
              <a href="?events_page=1#conferences-events" class="page-num">1</a>
              <?php if ($startPage > 2): ?>
                <span class="page-ellipsis">...</span>
              <?php endif; ?>
            <?php endif; ?>

            <?php for ($i = $startPage; $i <= $endPage; $i++): ?>
              <a href="?events_page=<?= $i ?>#conferences-events" class="page-num<?= $i === $page ? ' active' : '' ?>"><?= $i ?></a>
            <?php endfor; ?>

            <?php if ($endPage < $totalPages): ?>
              <?php if ($endPage < $totalPages - 1): ?>
                <span class="page-ellipsis">...</span>
              <?php endif; ?>
              <a href="?events_page=<?= $totalPages ?>#conferences-events" class="page-num"><?= $totalPages ?></a>
            <?php endif; ?>
          </div>

          <?php if ($page < $totalPages): ?>
            <a href="?events_page=<?= $page + 1 ?>#conferences-events" class="pagination-arrow next">
              Next
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </a>
          <?php endif; ?>
        </div>
        <?php endif; ?>

        <?php 
        } catch (Exception $e) {
          echo '<div class="error-message" role="alert">';
          echo '<p>Unable to load events data at this time. Please try again later.</p>';
          echo '</div>';
        }
        ?>
      </div>
    </section>
  
    <!-- NEWS & MEDIA SECTION -->
    <section id="news-media" class="home-news-section" aria-labelledby="news-heading">
      <div class="container">
        <header class="section-header-modern">
          <div class="header-content-wrapper">
            <span class="section-label-badge">Latest Updates</span>
            <h2 id="news-heading" class="section-title-modern">News & Media</h2>
            <p class="section-description">Recent updates, stories and resources from CCE — reports, recaps and media that highlight our work and community.</p>
          </div>
          <a href="news.php" class="view-all-btn">
            View All News
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </header>
        
        <?php
        try {
          $allNews = include __DIR__ . '/data/news.php';
          if (empty($allNews) || !is_array($allNews)) {
            throw new Exception('News data not available');
          }
          
          // Sort by published date descending (newest first)
          usort($allNews, function($a,$b){ 
            $timeA = isset($a['published_at']) ? strtotime($a['published_at']) : 0;
            $timeB = isset($b['published_at']) ? strtotime($b['published_at']) : 0;
            return $timeB <=> $timeA; 
          });
          
          // Pagination settings
          $newsPerPage = 6;
          $currentNewsPage = isset($_GET['news_page']) ? max(1, intval($_GET['news_page'])) : 1;
          $totalNewsItems = count($allNews);
          $totalNewsPages = max(1, ceil($totalNewsItems / $newsPerPage));
          $currentNewsPage = min($currentNewsPage, $totalNewsPages);
          $newsOffset = ($currentNewsPage - 1) * $newsPerPage;
          $newsToDisplay = array_slice($allNews, $newsOffset, $newsPerPage);
          
          if (!empty($newsToDisplay)) {
            echo '<div class="home-news-grid">';
            foreach ($newsToDisplay as $newsItem) {
              $publishedDate = new DateTimeImmutable($newsItem['published_at']);
              ?>
              <article class="news-compact-card">
                <div class="news-compact-image">
                  <img src="<?= htmlspecialchars($newsItem['featured_image']) ?>" alt="<?= htmlspecialchars($newsItem['title']) ?>" loading="lazy">
                  <div class="news-image-overlay"></div>
                </div>
                <div class="news-compact-body">
                  <div class="news-compact-meta">
                    <span class="compact-date">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                      <?= $publishedDate->format('M j, Y') ?>
                    </span>
                    <span class="compact-author">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                      <?= htmlspecialchars($newsItem['author']) ?>
                    </span>
                  </div>
                  <h3 class="news-compact-title">
                    <a href="<?= htmlspecialchars($newsItem['link']) ?>"><?= htmlspecialchars($newsItem['title']) ?></a>
                  </h3>
                  <p class="news-compact-excerpt"><?= htmlspecialchars($newsItem['excerpt']) ?></p>
                  <div class="news-compact-actions">
                    <a href="<?= htmlspecialchars($newsItem['link']) ?>" class="btn-compact-read">
                      Read More
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                  </div>
                </div>
              </article>
              <?php
            }
            echo '</div>';
            
            // Pagination
            if ($totalNewsPages > 1) {
              echo '<div class="home-news-pagination">';
              
              // Previous button
              if ($currentNewsPage > 1) {
                $prevPage = $currentNewsPage - 1;
                echo '<a href="?news_page=' . $prevPage . '#news-media" class="pagination-arrow prev">';
                echo '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>';
                echo 'Previous</a>';
              }
              
              // Page numbers
              echo '<div class="pagination-page-numbers">';
              $range = 2;
              for ($i = 1; $i <= $totalNewsPages; $i++) {
                if ($i == 1 || $i == $totalNewsPages || ($i >= $currentNewsPage - $range && $i <= $currentNewsPage + $range)) {
                  $activeClass = ($i == $currentNewsPage) ? ' active' : '';
                  echo '<a href="?news_page=' . $i . '#news-media" class="page-num' . $activeClass . '">' . $i . '</a>';
                } elseif ($i == $currentNewsPage - $range - 1 || $i == $currentNewsPage + $range + 1) {
                  echo '<span class="page-ellipsis">...</span>';
                }
              }
              echo '</div>';
              
              // Next button
              if ($currentNewsPage < $totalNewsPages) {
                $nextPage = $currentNewsPage + 1;
                echo '<a href="?news_page=' . $nextPage . '#news-media" class="pagination-arrow next">';
                echo 'Next<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>';
                echo '</a>';
              }
              
              echo '</div>';
            }
          } else {
            echo '<div class="no-content"><p>No news articles available at this time.</p></div>';
          }
        } catch (Exception $e) {
          echo '<div class="error-message"><p>Unable to load news data. Please try again later.</p></div>';
        }
        ?>
      </div>
    </section>

    <!-- GLOBAL IMPACT SECTION -->
    <section id="global-impact" class="global-impact-section" aria-labelledby="global-impact-heading">
      <h2 id="global-impact-heading" class="section-title">Global Impact</h2>
      <p class="section-desc">CCE's reach spans continents, empowering professionals and organizations to transform their communities with excellence and integrity.</p>
      <div class="global-impact-content">
        <div class="who-stats" role="group" aria-label="CCE Impact Statistics">
          <div class="stat">
            <span class="stat-number" data-count="5000">5,000+</span>
            <span class="stat-label">People Trained</span>
          </div>
          <div class="stat">
            <span class="stat-number" data-count="25">25+</span>
            <span class="stat-label">Countries Reached</span>
          </div>
          <div class="stat">
            <span class="stat-number" data-count="50">50+</span>
            <span class="stat-label">Partner Organizations</span>
          </div>
        </div>
      </div>
    </section>

   

    <!-- GET INVOLVED SECTION -->
    <section id="get-involved" class="get-involved-section" aria-labelledby="get-involved-heading">
      <div class="get-involved-container">
        <header class="get-involved-header">
          <h2 id="get-involved-heading" class="get-involved-title">Get Involved</h2>
          <p class="get-involved-subtitle">Join the CCE movement and help transform secular institutions through faith-driven professional excellence.</p>
        </header>
        <div class="involvement-options">
          <div class="involvement-card">
            <div class="involvement-icon">
              <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="30" cy="30" r="28" fill="#ff8800" opacity="0.1"/>
                <path d="M30 15C21.7 15 15 21.7 15 30C15 38.3 21.7 45 30 45C38.3 45 45 38.3 45 30C45 21.7 38.3 15 30 15ZM30 22.5C32.5 22.5 34.5 24.5 34.5 27C34.5 29.5 32.5 31.5 30 31.5C27.5 31.5 25.5 29.5 25.5 27C25.5 24.5 27.5 22.5 30 22.5ZM30 42C26 42 22.5 39.8 20.5 36.5C20.5 33 27.5 31 30 31C32.5 31 39.5 33 39.5 36.5C37.5 39.8 34 42 30 42Z" fill="#ff8800"/>
              </svg>
            </div>
            <h3 class="involvement-card-title">Volunteer</h3>
            <p class="involvement-card-desc">Contribute your time and skills to support CCE programs, events, and community initiatives.</p>
            <a href="get-involved.php#volunteer" class="involvement-btn">Learn More</a>
          </div>
          
          <div class="involvement-card">
            <div class="involvement-icon">
              <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="30" cy="30" r="28" fill="#252163" opacity="0.1"/>
                <path d="M38 18H22C19.8 18 18 19.8 18 22V38C18 40.2 19.8 42 22 42H38C40.2 42 42 40.2 42 38V22C42 19.8 40.2 18 38 18ZM38 38H22V22H38V38ZM26 34H34V36H26V34ZM26 30H34V32H26V30ZM26 26H34V28H26V26Z" fill="#252163"/>
              </svg>
            </div>
            <h3 class="involvement-card-title">Join as Consultant</h3>
            <p class="involvement-card-desc">Share your professional expertise and mentor emerging leaders in your field.</p>
            <a href="get-involved.php#consultant" class="involvement-btn">Apply Now</a>
          </div>
          
          <div class="involvement-card">
            <div class="involvement-icon">
              <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="30" cy="30" r="28" fill="#ff8800" opacity="0.1"/>
                <path d="M42 26L38 22L30 30L22 22L18 26L30 38L42 26Z" fill="#ff8800"/>
                <path d="M26 18H34V24L30 28L26 24V18Z" fill="#ff8800"/>
              </svg>
            </div>
            <h3 class="involvement-card-title">Partnerships</h3>
            <p class="involvement-card-desc">Collaborate with CCE to expand impact through institutional partnerships and joint initiatives.</p>
            <a href="get-involved.php#partnerships" class="involvement-btn">Partner With Us</a>
          </div>
        </div>
      </div>
    </section>

 
</main>





<!-- FOOTER -->
<?php include 'footer.php'; ?>

